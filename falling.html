<canvas></canvas>
<script>
	const canvas = document.querySelector('canvas');
	const ctx = canvas.getContext('2d');
	canvas.width = window.innerWidth;
	canvas.height = window.innerHeight;
	ctx.fillStyle = 'red';
	ctx.fillRect(400, 400, 100, 100);

	(function loop(){
		const imageData = ctx.getImageData(0,0,canvas.width,canvas.height);
		const data = imageData.data;
		const length = data.length;
		for(let i = 3; i < length; i += 4){
			data[i] -= 8;
		}
		ctx.putImageData(imageData, 0, -2);
		requestAnimationFrame(loop);
	})();
</script>