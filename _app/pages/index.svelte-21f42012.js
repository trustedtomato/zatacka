import{S as t,i as e,s as o,e as n,k as l,c as s,a as r,n as i,d as a,b as c,f as h,F as u,t as f,g as d,G as y,H as g,I as p,h as m,J as w,z as k,K as x,D as v,E as S,v as $,r as M,L as b,j as E,m as C,o as K,w as L,B as D,u as F,l as P,M as A,N as R,O as I}from"../chunks/vendor-2df06f0a.js";const N=[[["Esc","Escape"],["",""],["F1","F1"],["F2","F2"],["F3","F3"],["F4","F4"],["","",.5],["F5","F5"],["F6","F6"],["F7","F7"],["F8","F8"],["","",.5],["F9","F9"],["F10","F10"],["F11","F11"],["F12","F12"],["","",.5],["PS",""],["SL","ScrollLock"],["PB","Pause"]],[],[["`","Backquote"],["1","Digit1"],["2","Digit2"],["3","Digit3"],["4","Digit4"],["5","Digit5"],["6","Digit6"],["7","Digit7"],["8","Digit8"],["9","Digit9"],["0","Digit0"],["-","Minus"],["=","Equal"],["‚Üê","Backspace",2],["","",.5],["INS","Insert"],["HM","Home"],["PU","PageUp"]],[["‚≠æ","Tab",1.5],["Q","KeyQ"],["W","KeyW"],["E","KeyE"],["R","KeyR"],["T","KeyT"],["Y","KeyY"],["U","KeyU"],["I","KeyI"],["O","KeyO"],["P","KeyP"],["[","BracketLeft"],["]","BracketRight"],["‚èé","Enter",1.5],["","",.5],["DEL","Delete"],["END","End"],["PD","PageDown"]],[["CpsLk","CapsLock",2],["A","KeyA"],["S","KeyS"],["D","KeyD"],["F","KeyF"],["G","KeyG"],["H","KeyH"],["J","KeyJ"],["K","KeyK"],["L","KeyL"],[";","Semicolon"],["'","Quote"],["\\","Backslash"],["",""]],[["Shift","ShiftLeft",2.5],["Z","KeyZ"],["X","KeyX"],["C","KeyC"],["V","KeyV"],["B","KeyB"],["N","KeyN"],["M","KeyM"],[",","Comma"],[".","Period"],["/","Slash"],["Shift","ShiftRight",2.5],["","",1.5],["‚Üë","ArrowUp"]],[["Ctrl","ControlLeft",1.4],["OS","OSLeft",1.4],["Alt","AltLeft",1.4],["Space","Space",5.2],["Alt","AltRight",1.4],["Fn","",1.4],["üßæ","ContextMenu",1.4],["Ctrl","ControlRight",1.4],["","",.5],["‚Üê","ArrowLeft"],["‚Üì","ArrowDown"],["‚Üí","ArrowRight"]]],V=[{controlKeys:{turnAnticlockwise:"Backquote",turnClockwise:"Tab"},color:"hsl(0, 100%, 50%)",name:"red"},{controlKeys:{turnAnticlockwise:"ShiftLeft",turnClockwise:"KeyZ"},color:"hsl(30, 100%, 50%)",name:"orange",isColorLight:!0},{controlKeys:{turnAnticlockwise:"Digit2",turnClockwise:"Digit3"},color:"hsl(60, 100%, 50%)",name:"yellow",isColorLight:!0},{controlKeys:{turnAnticlockwise:"PageUp",turnClockwise:"PageDown"},color:"hsl(90, 100%, 50%)",name:"green",isColorLight:!0},{controlKeys:{turnAnticlockwise:"Digit7",turnClockwise:"Digit8"},color:"hsl(180, 100%, 50%)",name:"cyan",isColorLight:!0},{controlKeys:{turnAnticlockwise:"Minus",turnClockwise:"Equal"},color:"hsl(240, 100%, 50%)",name:"blue"},{controlKeys:{turnAnticlockwise:"KeyC",turnClockwise:"KeyV"},color:"hsl(270, 100%, 50%)",name:"purple"},{controlKeys:{turnAnticlockwise:"Comma",turnClockwise:"Period"},color:"hsl(300, 100%, 50%)",name:"magenta",isColorLight:!0},{controlKeys:{turnAnticlockwise:"ArrowDown",turnClockwise:"ArrowRight"},color:"hsl(330, 100%, 50%)",name:"pink"}];function B(t,e,o){const n=t.slice();return n[5]=e[o],n}function T(t,e,o){const n=t.slice();return n[8]=e[o],n}function U(t,e,o){const n=t.slice();return n[11]=e[o],n}function O(t){let e,o,l=t[11][0]+"";return{c(){e=n("td"),o=f(l),this.h()},l(t){e=s(t,"TD",{class:!0,style:!0,colspan:!0});var n=r(e);o=d(n,l),n.forEach(a),this.h()},h(){var o,n;c(e,"class","keyboard__key "+(t[11][0]?"":"keyboard__key--placeholder")+" svelte-1kp3b6j"),c(e,"style","\n\t\t\t\t\t\t\t\tbackground: "+(null==(o=t[2].get(t[11][1]))?void 0:o.color)+";\n\t\t\t\t\t\t\t\t"+((null==(n=t[2].get(t[11][1]))?void 0:n.isColorLight)?"color: black;":"")+"\n\t\t\t\t\t\t\t\twidth: "+2*(t[11][2]||1)+"rem\n\t\t\t\t\t\t\t"),c(e,"colspan",10*(t[11][2]||1))},m(t,n){h(t,e,n),u(e,o)},p:y,d(t){t&&a(e)}}}function q(t){let e,o,f=t[8],d=[];for(let n=0;n<f.length;n+=1)d[n]=O(U(t,f,n));return{c(){e=n("tr");for(let t=0;t<d.length;t+=1)d[t].c();o=l(),this.h()},l(t){e=s(t,"TR",{class:!0});var n=r(e);for(let e=0;e<d.length;e+=1)d[e].l(n);o=i(n),n.forEach(a),this.h()},h(){c(e,"class","keyboard__row svelte-1kp3b6j")},m(t,n){h(t,e,n);for(let o=0;o<d.length;o+=1)d[o].m(e,null);u(e,o)},p(t,n){if(4&n){let l;for(f=t[8],l=0;l<f.length;l+=1){const s=U(t,f,l);d[l]?d[l].p(s,n):(d[l]=O(s),d[l].c(),d[l].m(e,o))}for(;l<d.length;l+=1)d[l].d(1);d.length=f.length}},d(t){t&&a(e),g(d,t)}}}function z(t){let e,o,l,i;return{c(){e=f("Press "),o=n("span"),l=f("Space"),i=f(" to start the game!"),this.h()},l(t){e=d(t,"Press "),o=s(t,"SPAN",{style:!0});var n=r(o);l=d(n,"Space"),n.forEach(a),i=d(t," to start the game!"),this.h()},h(){p(o,"text-decoration","underline")},m(t,n){h(t,e,n),h(t,o,n),u(o,l),h(t,i,n)},d(t){t&&a(e),t&&a(o),t&&a(i)}}}function j(t){let e;return{c(){e=f("Need at least two players to start.")},l(t){e=d(t,"Need at least two players to start.")},m(t,o){h(t,e,o)},d(t){t&&a(e)}}}function H(t){let e;return{c(){e=f("Players who already joined:")},l(t){e=d(t,"Players who already joined:")},m(t,o){h(t,e,o)},d(t){t&&a(e)}}}function _(t){let e,o,c,y,g=t[5].name+"";return{c(){e=n("li"),o=n("span"),c=f(g),y=l(),this.h()},l(t){e=s(t,"LI",{});var n=r(e);o=s(n,"SPAN",{style:!0});var l=r(o);c=d(l,g),l.forEach(a),y=i(n),n.forEach(a),this.h()},h(){p(o,"padding","0 .25em"),p(o,"background",t[5].color),p(o,"color",(t[5].isColorLight?"black":"white")+"\n\t\t\t\t\t\t")},m(t,n){h(t,e,n),u(e,o),u(o,c),u(e,y)},p(t,e){1&e&&g!==(g=t[5].name+"")&&m(c,g),1&e&&p(o,"background",t[5].color),1&e&&p(o,"color",(t[5].isColorLight?"black":"white")+"\n\t\t\t\t\t\t")},d(t){t&&a(e)}}}function Z(t){let e,o,m,w,k,x,v,S,$,M,b,E,C,K,L=N,D=[];for(let n=0;n<L.length;n+=1)D[n]=q(T(t,L,n));function F(t,e){return t[1]?z:j}let P=F(t),A=P(t),R=t[0].size>0&&H(),I=[...t[0]],V=[];for(let n=0;n<I.length;n+=1)V[n]=_(B(t,I,n));return{c(){e=n("div"),o=n("div"),m=n("h1"),w=f("Zatacka"),k=l(),x=n("table");for(let t=0;t<D.length;t+=1)D[t].c();v=l(),S=n("div"),$=n("div"),M=f("Press a colored key to join with that color.\n\t\t\t\tThe keys with the same color are used for controlling the snake.\n\t\t\t\t"),A.c(),b=l(),E=n("div"),R&&R.c(),C=l(),K=n("ul");for(let t=0;t<V.length;t+=1)V[t].c();this.h()},l(t){e=s(t,"DIV",{style:!0});var n=r(e);o=s(n,"DIV",{style:!0});var l=r(o);m=s(l,"H1",{class:!0});var c=r(m);w=d(c,"Zatacka"),c.forEach(a),k=i(l),x=s(l,"TABLE",{class:!0});var h=r(x);for(let e=0;e<D.length;e+=1)D[e].l(h);h.forEach(a),v=i(l),S=s(l,"DIV",{style:!0});var u=r(S);$=s(u,"DIV",{});var f=r($);M=d(f,"Press a colored key to join with that color.\n\t\t\t\tThe keys with the same color are used for controlling the snake.\n\t\t\t\t"),A.l(f),f.forEach(a),b=i(u),E=s(u,"DIV",{});var y=r(E);R&&R.l(y),y.forEach(a),C=i(u),K=s(u,"UL",{});var g=r(K);for(let e=0;e<V.length;e+=1)V[e].l(g);g.forEach(a),u.forEach(a),l.forEach(a),n.forEach(a),this.h()},h(){c(m,"class","svelte-1kp3b6j"),c(x,"class","keyboard svelte-1kp3b6j"),p(S,"margin","1.5em 0"),p(o,"width","min-content"),p(e,"display","flex"),p(e,"flex-direction","column"),p(e,"align-items","center")},m(t,n){h(t,e,n),u(e,o),u(o,m),u(m,w),u(o,k),u(o,x);for(let e=0;e<D.length;e+=1)D[e].m(x,null);u(o,v),u(o,S),u(S,$),u($,M),A.m($,null),u(S,b),u(S,E),R&&R.m(E,null),u(S,C),u(S,K);for(let e=0;e<V.length;e+=1)V[e].m(K,null)},p(t,[e]){if(4&e){let o;for(L=N,o=0;o<L.length;o+=1){const n=T(t,L,o);D[o]?D[o].p(n,e):(D[o]=q(n),D[o].c(),D[o].m(x,null))}for(;o<D.length;o+=1)D[o].d(1);D.length=L.length}if(P!==(P=F(t))&&(A.d(1),A=P(t),A&&(A.c(),A.m($,null))),t[0].size>0?R||(R=H(),R.c(),R.m(E,null)):R&&(R.d(1),R=null),1&e){let o;for(I=[...t[0]],o=0;o<I.length;o+=1){const n=B(t,I,o);V[o]?V[o].p(n,e):(V[o]=_(n),V[o].c(),V[o].m(K,null))}for(;o<V.length;o+=1)V[o].d(1);V.length=I.length}},i:y,o:y,d(t){t&&a(e),g(D,t),A.d(),R&&R.d(),g(V,t)}}}function G(t,e,o){const n=w(),l=new Map;for(const a of V)l.set(a.controlKeys.turnClockwise,a),l.set(a.controlKeys.turnAnticlockwise,a);let s=new Set,r=!1;const i=t=>{if("Space"===t.code)return void(r&&n("requestStart",{players:s}));const e=l.get(t.code);e&&(t.preventDefault(),s.has(e)?s.delete(e):s.add(e),o(0,s))};return k((()=>{document.addEventListener("keydown",i)})),x((()=>{document.removeEventListener("keydown",i)})),t.$$.update=()=>{1&t.$$.dirty&&o(1,r=s.size>=2)},[s,r,l]}class Q extends t{constructor(t){super(),e(this,t,G,Z,o,{})}}const W=t=>({x:Math.cos(t.angle)*t.length,y:Math.sin(t.angle)*t.length}),J=(t,e)=>({x:t.x+e.x,y:t.y+e.y});function X(t){let e,o;const l=t[1].default,i=v(l,t,t[0],null);return{c(){e=n("div"),i&&i.c(),this.h()},l(t){e=s(t,"DIV",{style:!0});var o=r(e);i&&i.l(o),o.forEach(a),this.h()},h(){p(e,"position","absolute"),p(e,"margin","auto"),p(e,"max-width","33em"),p(e,"top","50%"),p(e,"left","50%"),p(e,"transform","translate(-50%, -50%)"),p(e,"border","2px solid white"),p(e,"padding",".5em"),p(e,"background","black")},m(t,n){h(t,e,n),i&&i.m(e,null),o=!0},p(t,[e]){i&&i.p&&(!o||1&e)&&S(i,l,t,t[0],e,null,null)},i(t){o||($(i,t),o=!0)},o(t){M(i,t),o=!1},d(t){t&&a(e),i&&i.d(t)}}}function Y(t,e,o){let{$$slots:n={},$$scope:l}=e;return t.$$set=t=>{"$$scope"in t&&o(0,l=t.$$scope)},[l,n]}class tt extends t{constructor(t){super(),e(this,t,Y,X,o,{})}}const et=(t,e)=>new Promise((o=>{const n=l=>{o(l),t.removeEventListener(e,n)};t.addEventListener(e,n)}));function ot(t,e,o){return t.addEventListener(e,o),{destroy(){t.removeEventListener(e,o)}}}const{PI:nt}=Math;var lt,st;function rt(t){const e=(t%(o=2*nt)+o)%o;var o;return e<.25*nt?lt.Right:e<.75*nt?lt.Down:e<1.25*nt?lt.Left:e<1.75*nt?lt.Up:lt.Right}(st=lt||(lt={})).Up="UP",st.Right="RIGHT",st.Down="DOWN",st.Left="LEFT";const{min:it,max:at}=Math;function ct(t,e){return function(t,e){const o=it(t[0].x,t[1].x),n=at(t[0].x,t[1].x),l=it(e[0].x,t[1].x),s=at(e[0].x,t[1].x),r=it(t[0].y,t[1].y),i=at(t[0].y,t[1].y),a=it(e[0].y,t[1].y),c=at(e[0].y,t[1].y);return n>=l&&s>=o&&i>=a&&c>=r}(t,e)&&b([t[0].x,t[0].y],[t[1].x,t[1].y],[e[0].x,e[0].y],[e[1].x,e[1].y])}function ht({text:t,color:e,font:o}){const n=document.createElement("span");n.style.font=o,n.appendChild(document.createTextNode(t)),document.body.appendChild(n);const{width:l,height:s}=n.getBoundingClientRect();document.body.removeChild(n);const r=document.createElement("canvas");r.width=Math.ceil(l),r.height=Math.ceil(s);const i=r.getContext("2d");return console.log(e,o),i.fillStyle=e,i.font=o,i.textBaseline="top",i.fillText(t,0,0),r}class ut{constructor(t,{alpha:e}={}){this.canvas=t,this.isCleared=!0,this.alpha=null==e||e,this.ctx=t.getContext("2d",{alpha:e}),this.width=Math.floor(t.width),this.height=Math.floor(t.height),this.buffer=new Uint8Array(this.width*this.height),this.alpha||(this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.width,this.height))}clear(){this.isCleared||(this.isCleared=!0,this.alpha?this.ctx.clearRect(0,0,this.width,this.height):(this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.width,this.height)),this.buffer.fill(0))}set fillStyle(t){this.ctx.fillStyle=t}fillRect(t,e,o,n){this.isCleared=!1,this.ctx.fillRect(t,e,o,n);for(let l=t;l<t+o;l++)for(let t=e;t<e+n;t++)this.buffer[t*this.width+l]=1}isPointFilled(t,e){return 0!==this.buffer[e*this.width+t]}}function ft(t,e,o){const n=t.slice();return n[35]=e[o],n}function dt(t){let e,o;return e=new tt({props:{$$slots:{default:[yt]},$$scope:{ctx:t}}}),{c(){E(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,n){K(e,t,n),o=!0},p(t,o){const n={};8&o[0]|128&o[1]&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||($(e.$$.fragment,t),o=!0)},o(t){M(e.$$.fragment,t),o=!1},d(t){L(e,t)}}}function yt(t){let e,o;return{c(){o=P(),this.h()},l(t){o=P(),this.h()},h(){e=new R(o)},m(n,l){e.m(t[3],n,l),h(n,o,l)},p(t,o){8&o[0]&&e.p(t[3])},d(t){t&&a(o),t&&e.d()}}}function gt(t){let e,o,l=t[5].get(t[35])+"";return{c(){e=n("div"),o=f(l),this.h()},l(t){e=s(t,"DIV",{style:!0});var n=r(e);o=d(n,l),n.forEach(a),this.h()},h(){p(e,"color",t[35].color)},m(t,n){h(t,e,n),u(e,o)},p(t,n){33&n[0]&&l!==(l=t[5].get(t[35])+"")&&m(o,l),1&n[0]&&p(e,"color",t[35].color)},d(t){t&&a(e)}}}function pt(t){let e,o,f,d,y,m,w,k,x,v,S,b,E=t[3]&&dt(t),C=[...t[0]],K=[];for(let n=0;n<C.length;n+=1)K[n]=gt(ft(t,C,n));return{c(){e=n("div"),o=n("div"),f=n("canvas"),d=l(),y=n("canvas"),m=l(),w=n("div"),k=l(),E&&E.c(),x=l(),v=n("div");for(let t=0;t<K.length;t+=1)K[t].c();S=l(),this.h()},l(t){e=s(t,"DIV",{style:!0});var n=r(e);o=s(n,"DIV",{style:!0});var l=r(o);f=s(l,"CANVAS",{class:!0}),r(f).forEach(a),d=i(l),y=s(l,"CANVAS",{class:!0}),r(y).forEach(a),m=i(l),w=s(l,"DIV",{style:!0}),r(w).forEach(a),k=i(l),E&&E.l(l),l.forEach(a),x=i(n),v=s(n,"DIV",{style:!0});var c=r(v);for(let e=0;e<K.length;e+=1)K[e].l(c);S=i(c),c.forEach(a),n.forEach(a),this.h()},h(){c(f,"class","svelte-euyi7a"),c(y,"class","svelte-euyi7a"),p(w,"position","absolute"),p(w,"left","0"),p(w,"top","0"),p(o,"position","relative"),p(o,"flex-grow","1"),p(v,"width",mt+"px"),p(v,"box-sizing","border-box"),p(v,"padding-left","6px"),p(e,"width","100%"),p(e,"height","100%"),p(e,"display","flex")},m(n,l){h(n,e,l),u(e,o),u(o,f),t[15](f),u(o,d),u(o,y),t[16](y),u(o,m),u(o,w),t[17](w),u(o,k),E&&E.m(o,null),u(e,x),u(e,v);for(let t=0;t<K.length;t+=1)K[t].m(v,null);u(v,S),b=!0},p(t,e){if(t[3]?E?(E.p(t,e),8&e[0]&&$(E,1)):(E=dt(t),E.c(),$(E,1),E.m(o,null)):E&&(D(),M(E,1,1,(()=>{E=null})),F()),33&e[0]){let o;for(C=[...t[0]],o=0;o<C.length;o+=1){const n=ft(t,C,o);K[o]?K[o].p(n,e):(K[o]=gt(n),K[o].c(),K[o].m(v,S))}for(;o<K.length;o+=1)K[o].d(1);K.length=C.length}},i(t){b||($(E),b=!0)},o(t){M(E),b=!1},d(o){o&&a(e),t[15](null),t[16](null),t[17](null),E&&E.d(),g(K,o)}}}const mt=80;function wt(t,e,o){var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))((function(l,s){function r(t){try{a(n.next(t))}catch(e){s(e)}}function i(t){try{a(n.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?l(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,i)}a((n=n.apply(t,e||[])).next())}))};const l=w();let s,r,i,{players:a}=e,{getIfShouldEnd:c=(({scores:t,numberOfPlayers:e})=>t.some((t=>t>=50*(e-1))))}=e,{deathScore:h=5}=e,{holeScore:u=1}=e,{headSize:f=4}=e,{speed:d=.12}=e,{holeLength:y=18}=e,{holePeriodLength:g=200}=e,{rotationRadius:p=40}=e,m=null,v=!1,S=0,$=new Map([...a].map((t=>[t,0])));const M=8*f+'px -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif';let b;const E=(async t=>{const e=await fetch(t),o=await e.text(),n=document.createElement("div");return n.innerHTML=o,n.querySelector("svg")})("skull-with-crossbones.svg").then((t=>(t.setAttribute("width","50px"),t.setAttribute("height","50px"),t))),C=2*f,K=Math.floor(window.innerWidth)-80,L=Math.floor(window.innerHeight),D=g/d,F=y/d,P=f/d,R=d/p,I=p*(Math.SQRT1_2+1),N=new Map([...a].map((t=>[t,{clockwise:!1,anticlockwise:!1}]))),V=[];return k((()=>n(void 0,void 0,void 0,(function*(){var t;document.body.style.overflow="hidden";for(const o of[s,r])o.width=K,o.height=L;const e=new ut(s,{alpha:!1}),n=new ut(r),y=t=>{t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.opacity="0",b.appendChild(t);const{width:e,height:o}=t.getBoundingClientRect();return{fadeOutFrom(n,l){n-=e/2,l-=o/2,t.style.transform=`translate(${n}px, ${l}px`,t.style.opacity="1",t.style.transition="",requestAnimationFrame((()=>{t.style.transform=`translate(${n}px, ${l-50}px`,t.style.opacity="0",t.style.transition="opacity 1s ease-out, transform 1s ease-out"}))}}},g=new Map([...a].map((t=>[t,y(ht({text:`+${u}`,color:t.color,font:M}))]))),w=new Map;E.then((t=>{for(const e of a){const o=t.cloneNode(!0);o.style.fill=e.color,w.set(e,y(o))}})),V.push(ot(document,"keydown",(t=>{for(const e of a)e.controlKeys.turnClockwise===t.code?(N.get(e).clockwise=!0,t.preventDefault()):e.controlKeys.turnAnticlockwise===t.code&&(N.get(e).anticlockwise=!0,t.preventDefault())})),ot(document,"keyup",(t=>{for(const e of a)e.controlKeys.turnClockwise===t.code?N.get(e).clockwise=!1:e.controlKeys.turnAnticlockwise===t.code&&(N.get(e).anticlockwise=!1)})));t:for(let l=1;!v;l++){e.clear(),e.fillStyle="white",e.fillRect(0,0,K,C),e.fillRect(0,0,C,L),e.fillRect(0,L-C,K,C),e.fillRect(K-C,0,C,L);const s=new Set(a),r=new Map([...a].map((t=>[t,{x:Math.random()*(K-f-2*I)+I,y:Math.random()*(L-f-2*I)+I}]))),y=new Map([...a].map((t=>[t,Math.random()*Math.PI*2])));let k=performance.now();S=k;let x=0;const M=new Map([...a].map((t=>[t,null]))),b=[];let E=!1;e:for(;!v;){const l=performance.now(),c=l-S,m=Math.max(.1,Math.min(c,P));if(x+=m,S=l,n.clear(),D-x%D<F){if(!E){E=!0;for(const t of a)M.set(t,r.get(t))}}else if(E){E=!1;const t=[...a].map((t=>[M.get(t),r.get(t)]));queueMicrotask((()=>{b.push(...t)}))}for(const i of s){const l=N.get(i),a=r.get(i),c=(()=>{if(l.clockwise!==l.anticlockwise){const t=R*m*(l.clockwise?1:-1),e=y.get(i),o=e+t,n=W({angle:e+t/2,length:2*p*Math.sin(Math.abs(t)/2)});return y.set(i,o),J(a,n)}return J(a,W({angle:y.get(i),length:m*d}))})();r.set(i,c);for(const t of b)ct(t,[a,c])&&(g.get(i).fadeOutFrom(c.x,c.y),$.set(i,$.get(i)+u),o(5,$));if((()=>{if(c.y+f>L||c.x+f>K||c.y<0||c.x<0)return!0;const t=rt(y.get(i)),o=Math.sign(Math.floor(c.x)-Math.floor(a.x)),l=Math.sign(Math.floor(c.y)-Math.floor(a.y)),s=[];t!==lt.Up&&t!==lt.Left||-1!==o&&-1!==l||s.push({x:Math.floor(c.x),y:Math.floor(c.y)}),t!==lt.Up&&t!==lt.Right||1!==o&&-1!==l||s.push({x:Math.floor(c.x+f-1),y:Math.floor(c.y)}),t!==lt.Down&&t!==lt.Left||-1!==o&&1!==l||s.push({x:Math.floor(c.x),y:Math.floor(c.y+f-1)}),t!==lt.Down&&t!==lt.Right||1!==o&&1!==l||s.push({x:Math.floor(c.x+f-1),y:Math.floor(c.y+f-1)});return s.filter((t=>{return o=t.x,l=t.y,e.isPointFilled(o,l)||n.isPointFilled(o,l);var o,l})).length>0})()){s.delete(i),null===(t=w.get(i))||void 0===t||t.fadeOutFrom(c.x,c.y);for(const t of s)$.set(t,$.get(t)+h),o(5,$)}}for(const t of a){const o=r.get(t),l=E?n:e;l.fillStyle=t.color,l.fillRect(Math.floor(o.x),Math.floor(o.y),f,f)}if(o(4,i=performance.now()-l),s.size<=1)break e;yield new Promise((t=>{requestAnimationFrame(t)}))}if(c({scores:[...$.values()],elapsedRounds:l,numberOfPlayers:a.size})){for(o(3,m='Game ended. Press <span class="underline">Enter</span> to go to the menu.');;){if("Enter"===(yield et(document,"keydown")).code)break}o(3,m=null);break t}for(o(3,m='Press <span class="underline">Space</span> to continue to the next round‚Ä¶');;){if("Space"===(yield et(document,"keydown")).code)break}o(3,m=null)}l("ended")})))),x((()=>{document.body.style.overflow="";for(const t of V)t.destroy();v=!0})),t.$$set=t=>{"players"in t&&o(0,a=t.players),"getIfShouldEnd"in t&&o(7,c=t.getIfShouldEnd),"deathScore"in t&&o(8,h=t.deathScore),"holeScore"in t&&o(9,u=t.holeScore),"headSize"in t&&o(10,f=t.headSize),"speed"in t&&o(11,d=t.speed),"holeLength"in t&&o(12,y=t.holeLength),"holePeriodLength"in t&&o(13,g=t.holePeriodLength),"rotationRadius"in t&&o(14,p=t.rotationRadius)},[a,s,r,m,i,$,b,c,h,u,f,d,y,g,p,function(t){A[t?"unshift":"push"]((()=>{s=t,o(1,s)}))},function(t){A[t?"unshift":"push"]((()=>{r=t,o(2,r)}))},function(t){A[t?"unshift":"push"]((()=>{b=t,o(6,b)}))}]}class kt extends t{constructor(t){super(),e(this,t,wt,pt,o,{players:0,getIfShouldEnd:7,deathScore:8,holeScore:9,headSize:10,speed:11,holeLength:12,holePeriodLength:13,rotationRadius:14},[-1,-1])}}function xt(t){let e,o;return e=new kt({props:{players:t[0]}}),e.$on("ended",t[2]),{c(){E(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,n){K(e,t,n),o=!0},p(t,o){const n={};1&o&&(n.players=t[0]),e.$set(n)},i(t){o||($(e.$$.fragment,t),o=!0)},o(t){M(e.$$.fragment,t),o=!1},d(t){L(e,t)}}}function vt(t){let e,o;return e=new Q({}),e.$on("requestStart",t[1]),{c(){E(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,n){K(e,t,n),o=!0},p:y,i(t){o||($(e.$$.fragment,t),o=!0)},o(t){M(e.$$.fragment,t),o=!1},d(t){L(e,t)}}}function St(t){let e,o,n,s,r;const c=[vt,xt],u=[];function f(t,e){return null===t[0]?0:1}return o=f(t),n=u[o]=c[o](t),{c(){e=l(),n.c(),s=P(),this.h()},l(t){I('[data-svelte="svelte-10qo5my"]',document.head).forEach(a),e=i(t),n.l(t),s=P(),this.h()},h(){document.title="\n\t\tZatacka\n\t"},m(t,n){h(t,e,n),u[o].m(t,n),h(t,s,n),r=!0},p(t,[e]){let l=o;o=f(t),o===l?u[o].p(t,e):(D(),M(u[l],1,1,(()=>{u[l]=null})),F(),n=u[o],n?n.p(t,e):(n=u[o]=c[o](t),n.c()),$(n,1),n.m(s.parentNode,s))},i(t){r||($(n),r=!0)},o(t){M(n),r=!1},d(t){t&&a(e),u[o].d(t),t&&a(s)}}}function $t(t,e,o){let n=null;return[n,t=>{o(0,n=t.detail.players)},()=>{o(0,n=null)}]}export default class extends t{constructor(t){super(),e(this,t,$t,St,o,{})}}
